<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ site.title }} | {% if page.title %}{{ page.title }}{% endif %}</title>
    <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">

    <link rel="stylesheet" href="{{ "/css/main.css" | prepend: site.baseurl }}">

    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />

    {% capture social_image%}{% if page.feature_image %}{{ page.feature_image | prepend: '/img/' | prepend: site.url }}{% endif %}{% endcapture %}
    {% capture social_title %}{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}{% endcapture %}
    {% capture social_description %}{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{%endif %}{%endcapture%}
    {% capture seo_url %}{{ page.url | replace:'index.html','' | prepend: site.url }}{%endcapture%}
    {% capture seo_description %}{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}{%endcapture%}
    {% capture seo_title %}{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}{%endcapture%}
    {% capture seo_image %}{% if page.feature_image %}{{ page.feature_image | prepend: '/img/' | prepend: site.url }}{% endif %}{%endcapture%}

    <link rel="canonical" href="{{ seo_url }}">
    
    <title>{{ seo_title | escape }}</title>
    <meta name="description" content="{{ seo_description }}">
    
    <meta itemprop="name" content="{{ seo_title }}">
    <meta itemprop="description" content="{{ seo_description }}">
    <meta itemprop="image" content="{{seo_image}}" />
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ seo_title }}">
    <meta name="twitter:description" content="{{ seo_description }}">
    <meta name="twitter:creator" content="@{{page.twitter_username}}">
    <meta name="twitter:image:src" content="{{seo_image}}" />
    
    <meta property="og:title" content="{{ seo_title }}" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="{{seo_url}}" />
    <meta property="og:image" content="{{seo_image}}" />
    <meta property="og:description" content="{{seo_description}}" />
    <meta property="og:site_name" content="{{site.title}}" />

    {% if page.layout == 'post' %}
    <meta name="author" content="{{ page.author_name }}">
    <meta name="twitter:site" content="@{{page.twitter_username}}">
    <meta name="twitter:label1" value="Author" />
    <meta name="twitter:data1" value="{{ page.author_name }}" />
    <meta name="twitter:label2" value="Reading time" />
    <meta name="twitter:data2" value="{% assign words = page.content | strip_html | number_of_words %}{% if words < 360 %}1 minute{% else %}{{ words | divided_by:180 }} minutes{% endif %} read" />
    {% endif %}

    <!--[if lt IE 9]>
        <script src="{{ "/js/vendor/html5shiv.min.js" | prepend: site.baseurl }}"></script>
    <![endif]-->
</head>
